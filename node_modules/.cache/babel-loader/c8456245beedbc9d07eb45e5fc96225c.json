{"ast":null,"code":"import _regeneratorRuntime from \"/Users/m/Desktop/dev/web3/Escrow_2/simple-escrow/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/m/Desktop/dev/web3/Escrow_2/simple-escrow/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/m/Desktop/dev/web3/Escrow_2/simple-escrow/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/m/Desktop/dev/web3/Escrow_2/simple-escrow/src/App.js\";\n\nimport React, { Component, useEffect, useState } from 'react';\nimport Escrow from './contracts/Escrow.json';\nimport { getWeb3 } from './utils.js';\n\nvar App = function App() {\n  var _useState = useState(undefined),\n      _useState2 = _slicedToArray(_useState, 2),\n      web3 = _useState2[0],\n      setWeb3 = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      accounts = _useState4[0],\n      setAccounts = _useState4[1];\n\n  var _useState5 = useState(undefined),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentAccount = _useState6[0],\n      setCurrentAccount = _useState6[1];\n\n  var _useState7 = useState(undefined),\n      _useState8 = _slicedToArray(_useState7, 2),\n      contract = _useState8[0],\n      setContract = _useState8[1];\n\n  var _useState9 = useState(undefined),\n      _useState10 = _slicedToArray(_useState9, 2),\n      balance = _useState10[0],\n      setBalance = _useState10[1];\n\n  var _useState11 = useState(undefined),\n      _useState12 = _slicedToArray(_useState11, 2),\n      contractAddress = _useState12[0],\n      setContractAddress = _useState12[1];\n\n  useEffect(function () {}, []);\n\n  function Initiating() {\n    return _Initiating.apply(this, arguments);\n  }\n\n  function _Initiating() {\n    _Initiating = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var web3, networkId, deployedNetwork, contract, accounts, contractAddress;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return getWeb3();\n\n            case 2:\n              web3 = _context4.sent;\n              _context4.next = 5;\n              return web3.eth.net.getId();\n\n            case 5:\n              networkId = _context4.sent;\n              deployedNetwork = Escrow.networks[networkId];\n              contract = new web3.eth.Contract(Escrow.abi, deployedNetwork && deployedNetwork.address);\n              _context4.next = 10;\n              return web3.eth.getAccounts();\n\n            case 10:\n              accounts = _context4.sent;\n              _context4.next = 13;\n              return contract._address;\n\n            case 13:\n              contractAddress = _context4.sent;\n              setContractAddress(contractAddress);\n              setWeb3(this.updateBalance);\n              setAccounts(this.updateBalance);\n              setContract(this.updateBalance);\n\n            case 18:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this);\n    }));\n    return _Initiating.apply(this, arguments);\n  }\n\n  (function () {\n    var _updateBalance = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var balance;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setContract(contract);\n              _context.next = 3;\n              return contract.methods.balanceOf().call();\n\n            case 3:\n              balance = _context.sent;\n              setBalance({\n                balance: balance\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function updateBalance() {\n      return _updateBalance.apply(this, arguments);\n    }\n\n    return updateBalance;\n  })()()( /*#__PURE__*/function () {\n    var _deposit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              setContract(contract);\n              setAccounts(accounts);\n              _context2.next = 5;\n              return contract.methods.deposit().send({\n                from: accounts[0],\n                value: e.target.elements[0].value\n              });\n\n            case 5:\n              this.updateBalance();\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function deposit(_x) {\n      return _deposit.apply(this, arguments);\n    }\n\n    return deposit;\n  }())()( /*#__PURE__*/function () {\n    var _release = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setContract(contract);\n              setAccounts(accounts);\n              _context3.next = 4;\n              return contract.methods.release().send({\n                from: accounts[0]\n              });\n\n            case 4:\n              this.updateBalance();\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    function release() {\n      return _release.apply(this, arguments);\n    }\n\n    return release;\n  }())();\n  setBalance({\n    balance: balance\n  });\n  setContractAddress(contractAddress);\n  setAccounts(accounts);\n\n  if (!_this.state.web3) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, \"Escrow Dapp\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, \"Contract address: \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 32\n    }\n  }, contractAddress)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, \"Wallet address: \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 30\n    }\n  }, accounts)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, \"Deposited balance: \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 33\n    }\n  }, balance), \" wei \"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return _this.deposit(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"deposit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, \"Deposit\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"form-control\",\n    id: \"deposit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"Submit\")))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      return _this.release();\n    },\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, \"Release\"))));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/m/Desktop/dev/web3/Escrow_2/simple-escrow/src/App.js"],"names":["React","Component","useEffect","useState","Escrow","getWeb3","App","undefined","web3","setWeb3","accounts","setAccounts","currentAccount","setCurrentAccount","contract","setContract","balance","setBalance","contractAddress","setContractAddress","Initiating","eth","net","getId","networkId","deployedNetwork","networks","Contract","abi","address","getAccounts","_address","updateBalance","methods","balanceOf","call","e","preventDefault","deposit","send","from","value","target","elements","release","state"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from 'react';\nimport Escrow from './contracts/Escrow.json';\nimport { getWeb3 } from './utils.js';\n\nconst App = () => {\n\n  const [web3, setWeb3] = useState(undefined);\n  const [accounts, setAccounts] = useState([]);\n  const [currentAccount, setCurrentAccount] = useState(undefined);\n  const [contract, setContract] = useState(undefined);\n  const [balance, setBalance] = useState(undefined);\n  const [contractAddress, setContractAddress] = useState(undefined);\n\n  useEffect(() => {\n\n  }, []);\n\n  async function Initiating() {\n    const web3 = await getWeb3();\n    const networkId = await web3.eth.net.getId();\n    const deployedNetwork = Escrow.networks[networkId];\n    const contract = new web3.eth.Contract(\n      Escrow.abi,\n      deployedNetwork && deployedNetwork.address,\n    );\n    const accounts = await web3.eth.getAccounts();\n    const contractAddress = await contract._address;\n\n    setContractAddress(contractAddress);\n    setWeb3(this.updateBalance);\n    setAccounts(this.updateBalance);\n    setContract(this.updateBalance);\n  }\n\n  (async function updateBalance() {\n    setContract(contract);\n    const balance = await contract.methods.balanceOf().call();\n    setBalance({ balance })\n  })()\n\n    (async function deposit(e) {\n      e.preventDefault();\n      setContract(contract);\n      setAccounts(accounts);\n      await contract.methods.deposit().send({\n        from: accounts[0],\n        value: e.target.elements[0].value\n      });\n      this.updateBalance();\n    })()\n\n    (async function release() {\n      setContract(contract);\n      setAccounts(accounts);\n      await contract.methods.release().send({\n        from: accounts[0],\n      });\n      this.updateBalance();\n    })()\n\n  setBalance({ balance });\n  setContractAddress(contractAddress);\n  setAccounts(accounts);\n\n  if (!this.state.web3) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"container\">\n      <h1 className=\"text-center\">Escrow Dapp</h1>\n\n      <div className=\"row\">\n        <div className=\"col-sm-12\">\n          <p>Contract address: <b>{contractAddress}</b></p>\n        </div>\n      </div>\n\n      <div className=\"row\">\n        <div className=\"col-sm-12\">\n          <p>Wallet address: <b>{accounts}</b></p>\n        </div>\n      </div>\n\n      <div className=\"row\">\n        <div className=\"col-sm-12\">\n          <p>Deposited balance: <b>{balance}</b> wei </p>\n        </div>\n      </div>\n\n      <div className=\"row\">\n        <div className=\"col-sm-12\">\n          <form onSubmit={e => this.deposit(e)}>\n            <div className=\"form-group\">\n              <label htmlFor=\"deposit\">Deposit</label>\n              <input type=\"number\" className=\"form-control\" id=\"deposit\" />\n            </div>\n            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n          </form>\n        </div>\n      </div>\n\n      <br />\n\n      <div className=\"row\">\n        <div className=\"col-sm-12\">\n          <button onClick={() => this.release()} type=\"submit\" className=\"btn btn-primary\">Release</button>\n        </div>\n      </div>\n\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}